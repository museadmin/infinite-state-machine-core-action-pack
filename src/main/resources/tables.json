{
  "tables": [
    {
      "name" : "dependencies",
      "columns" : [
        {
          "primary_key" : true,
          "not_null" : true,
          "name" : "dependency_id",
          "type" : "INTEGER",
          "default" : "",
          "comment" : ""
        },
        {
          "primary_key" : false,
          "not_null" : true,
          "name" : "dependency",
          "type" : "CHAR",
          "default" : "",
          "comment" : "Name of the dependency"
        },
        {
          "primary_key" : false,
          "not_null" : true,
          "name" : "version",
          "type" : "CHAR",
          "default" : "",
          "comment" : "Version number of the dependency"
        }
      ]
    },
    {
      "name" : "properties",
      "columns" : [
        {
          "primary_key" : true,
          "not_null" : true,
          "name" : "property",
          "type" : "CHAR",
          "default" : "",
          "comment" : "A property"
        },
        {
          "primary_key" : false,
          "not_null" : false,
          "name" : "value",
          "type" : "CHAR",
          "default" : "",
          "comment" : "The value of the property"
        }
      ]
    },
    {
      "name" : "states",
      "columns" : [
        {
          "primary_key" : true,
          "not_null" : true ,
          "name" : "id",
          "type" : "INTEGER",
          "default" : "",
          "comment" : ""
        },
        {
          "primary_key" : false,
          "not_null" : false,
          "name" : "state",
          "type" : "BOOLEAN",
          "default" : "0",
          "comment" : "State is true (1) or false (0)"
        },
        {
          "primary_key" : false,
          "not_null" : true,
          "name" : "state_flag",
          "type" : "TEXT",
          "default" : "",
          "comment" : "Textual flag"
        },
        {
          "primary_key" : false,
          "not_null" : false,
          "name" : "note",
          "type" : "TEXT",
          "default" : "",
          "comment" : "Note explaining what this state is for"
        }
      ]
    },
    {
      "name" : "actions",
      "columns" : [
        {
          "primary_key" : true,
          "not_null" : true,
          "name" : "id",
          "type" : "INTEGER",
          "default" : "",
          "comment" : ""
        },
        {
          "primary_key" : false,
          "not_null" : false,
          "name" : "action",
          "type" : "TEXT",
          "default" : "",
          "comment" : "The textual name. e.g. PROCESS_NORMAL_SHUTDOWN"
        },
        {
          "primary_key" : false,
          "not_null" : true,
          "name" : "phase",
          "type" : "TEXT",
          "default" : "STARTUP",
          "comment" : "The run phase this action is valid in"
        },
        {
          "primary_key" : false,
          "not_null" : false,
          "name" : "payload",
          "type" : "TEXT",
          "default" : "",
          "comment" : "Any payload required for action"
        },
        {
          "primary_key" : false,
          "not_null" : true,
          "name" : "activate",
          "type" : "BOOLEAN",
          "default" : "0",
          "comment" : "Is this action active or not?"
        }
      ]
    },
    {
      "name" : "messages",
      "columns" : [
        {
          "primary_key" : true,
          "not_null" : true,
          "name" : "id",
          "type" : "INTEGER",
          "default" : "",
          "comment" : "Record ID in recipient messages table"
        },
        {
          "primary_key" : false,
          "not_null" : true,
          "name" : "sender",
          "type" : "TEXT",
          "default" : "",
          "comment" : "Return address of sender"
        },
        {
          "primary_key" : false,
          "not_null" : true,
          "name" : "sender_id",
          "type" : "INTEGER",
          "default" : "",
          "comment" : "Record ID in sender messages table"
        },
        {
          "primary_key" : false,
          "not_null" : true,
          "name" : "action",
          "type" : "TEXT",
          "default" : "",
          "comment" : "Name of the action that handles this message"
        },
        {
          "primary_key" : false,
          "not_null" : false,
          "name" : "payload",
          "type" : "TEXT",
          "default" : "",
          "comment" : "Json body of msg payload"
        },
        {
          "primary_key" : false,
          "not_null" : true,
          "name" : "sent",
          "type" : "TEXT",
          "default" : "",
          "comment" : "Timestamp msg sent by sender"
        },
        {
          "primary_key" : false,
          "not_null" : true,
          "name" : "received",
          "type" : "TEXT",
          "default" : "",
          "comment" : "Timestamp ism loaded message into database"
        },
        {
          "primary_key" : false,
          "not_null" : true,
          "name" : "processed",
          "type" : "BOOLEAN",
          "default" : "false",
          "comment" : "Has the message been processed"
        }
      ]
    }
  ]
}